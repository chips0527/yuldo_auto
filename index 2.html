<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>율도원 | 입학의 날</title>
    <style>
        /* 스타일 관련 코드 그대로 유지 */
        @font-face {
        font-family: 'ChosunCentennial';
        src: url('https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2206-02@1.0/ChosunCentennial.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
}

        @font-face {
        font-family: 'Ownglyph_ryuttung-Rg';
        src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2405-2@1.0/Ownglyph_ryuttung-Rg.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
}
        .button {
            font-family: 'Ownglyph_ryuttung-Rg', sans-serif;
            background-color: #9370DB;
            color: white;
            padding: 3px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 25px;
        }

        .button:hover {
            background-color: #5F9EA0;
        }

        /* 오디오 시작 버튼을 좌상단으로 고정 */
        .audio-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10; /* 버튼을 다른 요소 위에 표시 */
        }
@media screen and (max-width: 768px) {
  body {
    transform: scale(0.8); /* 화면을 70% 크기로 줄임 */
    transform-origin: top center; /* 축소 기준점 설정 */
  }
}

body {
            margin: 0;
            overflow: hidden;
        }

        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #video-container.hidden {
            opacity: 0;
            transition: opacity 1s ease;
        }


        /* body 스타일이 @font-face 이후에 오도록 수정 */
        body {
        font-family: 'ChosunCentennial', sans-serif;
        font-size: 20px;
        margin: 0;
        background-color: #f4f4f9;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-size: cover;
        background-position: center;
}


        .step {
            display: none;
            position: relative;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
        }

        .step.active {
            display: block;
        }

        .input-field {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 18px;
        }

        .dorm-description {
            color: #333;
            font-size: 18px;
            line-height: 1.5;
            text-align: center;
            margin: 20px 0;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .button-container .button {
            margin: 10px 0;
        }
    </style>
</head>

<body>

    <!-- 효과음 재생용 오디오 태그 -->
    <audio id="clickSound1" src="https://github.com/chips0527/yuldo/raw/main/flip%20paper.mp3" preload="auto"></audio>
    <audio id="clickSound2" src="https://github.com/chips0527/yuldo/raw/main/drink%20sound_.mp3" preload="auto"></audio>

    <!--배경음악 -->
        <audio id="backgroundAudio" loop muted>
        <source src="https://github.com/chips0527/yuldo/raw/main/horizon_nok.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <button class="button audio-button" onclick="startAudio()">♫ 지평선이 사라지는 곳 - 녹음 ♫</button>

       <div id="video-container">
        <video id="intro-video" autoplay muted>
            <source src="https://github.com/chips0527/yuldo/raw/main/open.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- Step 1 -->
    <div id="step1" class="step active">
        <h1>예디버스에 오신 걸 환영합니다.</h1>
        <p>무수한 멀티버스 세계에 오신 걸 환영합니다.<br>
           여행자님이 이번에 도착한 멀티버스는<br>바로 한국의 해리포터 세계, <I><B>율도</B></I>입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(2)">1. 윙가르디움 레비오우사✨</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(12)">2. 싫어요.</button>
    </div>

    <!-- Step 2 -->
    <div id="step2" class="step">
        <p>이곳은 설악산 인근에 있는<br>
        500년 역사의 한국의 마법학교, <B><I>율도원(霱島園)</I></b>입니다.<br>
        오늘은 2월 28일로, <B><I>율도원의 입학식</I></B>이 있는 날입니다.<br>
        여행자님은 이 입학식에 참석하실 예정입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(3)">1. 드디어 마법 학교 입학이다..!</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(12)">2. 집에 갈래요.</button>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="step">
    <h1>~여행자님의 정보를 적어주세요~</h1>
    <p>입학식에 앞서 준비할 것이 있습니다.<br>
    여행자님에 대해 알려주세요.</p>
    <input type="text" id="name" class="input-field" placeholder="이름을 입력하세요" required>
    <input type="date" id="birthdate" class="input-field" placeholder="생년월일을 입력하세요" required>
    <input type="text" id="dayMaster" class="input-field" placeholder="일간을 입력하세요 (예: 갑목, 병화)" required>
    <p><a href="https://pro.forceteller.com/profile/edit" target="_target">나의 일간을 알고 싶다면</a></p>
    <button class="button" onclick="playClickSound1(); saveNameAndGoToNextStep(4)">다 적었어요.</button>
</div>

    <!-- Step 4 -->
    <div id="step4" class="step">
        <h1>율도원, 해질녘의 판석 광장</h1>
        <p>영매화가 입학을 축하하는 꽃비를 내려줍니다.<br>삼삼오오 앉아있는 아이들은</br>모두 이번 해의 신입생입니다.<br>
<span id="userNameDisplay"></span>님도 그 중 하나입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(5)">1. 두근두근.</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">2. 땅바닥에 날 앉혀?!</button>
    </div>

    <!-- Step 5 -->
    <div id="step5" class="step">
        <p>여행자님이 앉아있는 소반 위에<br>
        <I><B>박달나무 차</b></I>가 한 잔 올라와 있습니다.<br>
        신입생의 기숙사 배정은 이 찻 잔으로 이루어집니다.</p>
        <p>설레이는 눈망울들이 연설 중인 부원장님께 향해 있습니다.<br>
        부원장님이 율도원의 기숙사에 대해 설명해주시네요.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(6)">1. 저도 알고 싶어요.</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">2. 그래서요?</button>
    </div>

    <!-- Step 6 -->
    <div id="step6" class="step">
        <h1>율도원의 기숙사</h1>
        <p>율도원의 기숙사는 오행에 따라 <I><b>다섯 가지</b></I>가 있습니다.</p>
        <p>- 하얀 까치의 <font color="#B0C4DE">백작관</font>🕊<br>
        - 붉은 담비의 <font color="#FF4500">적초관</font>🦊<br>
        - 푸른 산양의 <font color="#228B22">청양관</font>🐐<br>
        - 노란 나비의 <font color="#D2691E">황접관</font>🦋<br>
        - 검은 상괭이의 <font color="#000080">흑상관</font>🐬</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(7)">확인했어요.</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">알게 뭐야.</button>
    </div>

    <!-- Step 7 -->
    <div id="step7" class="step">
        <p>부원장님의 연설이 끝났습니다.<br>
        이제 <I><b>기숙사 배정</b></I>이 시작 될 거에요.<br>
        여행자님의 운명은 어떤 기숙사와 함께 하게 될까요?</p>
        <p>소반에 놓인 박달나무 차를 마셔주세요.</p>
        <button class="button" onclick="playClickSound2(); goToNextStep(8)">1. 차를 한 모금 마신다.</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">2. 찻잔을 엎어버린다.</button>
    </div>

    <!-- Step 8 -->
    <div id="step8" class="step">
        <p>찻잔에서 기운이 파르르, 떨리더니<br>작은 소용돌이가 일었습니다.<br>
        <I><B>선명한 색감</b></I>이 찻잔 안에서부터 떠오릅니다.</p>
        여행자님의 기숙사는 <I><span id="assignedDorm" style="color:"></span></I>입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(9)">!!!</button>
    </div>

    <!-- Step 9 -->
    <div id="step9" class="step">
        <span id="dormDescription" class="dorm-description"></span><br><br>
        <button class="button" onclick="playClickSound1(); goToNextStep(10)">1. 확인했어요.</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">2. 퉤.</button>
    </div>

    <!-- Step 10 -->
    <div id="step10" class="step">
        <p>여행자님은 앞으로 이 기숙사에서</br>학우들과 동고동락하며 12년간 수학하게 됩니다.<br>즐거운 날도, 슬픈 날도 추억으로 쌓아갈</br>멋진 친구들도 생길 거에요.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(11)">1. 네!</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(13)">2. 뭔 학교를 12년이나 다녀..?</button>
    </div>

    <!-- Step 11 -->
    <div id="step11" class="step">
        <p>안내자인 제 역할은 여기까지 입니다.</p>
        <p>율도원에서의 여행자님의 활약을 기대하겠습니다.<br>
        그럼 안녕히.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(12)">1. 안녕!</button>
        <button class="button" onclick="playClickSound1(); goToNextStep(12)">2. 고마웠어!</button>
    </div>

    <!-- Step 12 -->
    <div id="step12" class="step">
        <h1><율도원 입학의 날> 마침.</h1>
        <div class="button-container">
            <button class="button" onclick="playClickSound1(); restart()">기숙사 배정 다시 받기</button>
            <button class="button" onclick="playClickSound1(); closePage()">끝내기</button>
        </div>
    </div>

    <!-- Step 13 -->
    <div id="step13" class="step">
        <h1>퇴학</h1>
        <p>여행자님은 율도원에 입학할 자격을 상실하셨습니다.<br>
        인(仁),의(義),예(禮),지(智),신(信)을 중요시하는<br>
        율도원의 이념을 존중해주세요.</p>
        <div class="button-container">
            <button class="button" onclick="playClickSound1(); goToNextStep(4)">기숙사 배정 이어 받기</button>
            <button class="button" onclick="playClickSound1(); closePage()">끝내기</button>
        </div>
    </div>


<script>

document.addEventListener("DOMContentLoaded", () => {
        const video = document.getElementById("intro-video");
        const videoContainer = document.getElementById("video-container");

        // 1. 페이지 클릭 시 비디오 숨기기
        document.body.addEventListener('click', () => {
            hideVideo();
        });

        // 2. 비디오 종료 시 비디오 숨기기
        video.addEventListener("ended", () => {
            hideVideo();
        });

        // 비디오 숨기기 함수
        function hideVideo() {
            if (videoContainer && !videoContainer.classList.contains("hidden")) {
                videoContainer.classList.add("hidden");
                setTimeout(() => {
                    videoContainer.style.display = "none";
                }, 1000); // transition 시간과 일치시킴
            }
        }
    });
// 사용자 입력 값 처리
var userName = "사용자 이름"; // 여기에 사용자 이름을 입력받음
var assignedDorm = "청양관";  // 여기에 기숙사 이름을 입력받음

// 값 삽입
document.getElementById("userNameDisplay").innerText = userName;
document.getElementById("assignedDorm").innerText = assignedDorm;


// 기숙사 데이터: 각 일간에 해당하는 기숙사 정보


const dormData = {
    "갑": {
        name: "청양관",
        color: "#228B22",
        description: "<h1>청양관</h1>상징 동물: 푸른 산양<br>상징 오행: 나무<br>상징 색: 청색<br>기숙사 상징 : 포용<br>기숙사 이념: 박애(인仁)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 태종-세종 시기 동아시아의 유랑시인이자 마법역사학자 &lt;양 화명&gt;"
    },
    "을": {
        name: "청양관",
        color: "#228B22",
        description: "<h1>청양관</h1>상징 동물: 푸른 산양<br>상징 오행: 나무<br>상징 색: 청색<br>기숙사 상징 : 포용<br>기숙사 이념: 박애(인仁)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 태종-세종 시기 동아시아의 유랑시인이자 마법역사학자 &lt;양 화명&gt;"
    },
    "병": {
        name: "적초관",
        color: "#FF4500",
        description: "<h1>적초관</h1>상징 동물: 붉은 담비<br>상징 오행: 불<br>상징 색: 적색<br>기숙사 상징 : 열정<br>기숙사 이념: 힘(예禮)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 4군 6진 개척기여자 &lt;돈 지담&gt; 장군"
    },
    "정": {
        name: "적초관",
        color: "#FF4500",
        description: "<h1>적초관</h1>상징 동물: 붉은 담비<br>상징 오행: 불<br>상징 색: 적색<br>기숙사 상징 : 열정<br>기숙사 이념: 힘(예禮)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 4군 6진 개척기여자 &lt;돈 지담&gt; 장군"
    },
    "무": {
        name: "황접관",
        color: "#D2691E",
        description: "<h1>황접관</h1>상징 동물: 황색 나비<br>상징 오행: 흙<br>상징 색: 황색<br>기숙사 상징 : 인내<br>기숙사 이념: 믿음(신信)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 대검무당, 의관인 &lt;사비 화&gt;"
    },
    "기": {
        name: "황접관",
        color: "#D2691E",
        description: "<h1>황접관</h1>상징 동물: 황색 나비<br>상징 오행: 흙<br>상징 색: 황색<br>기숙사 상징 : 인내<br>기숙사 이념: 믿음(신信)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 대검무당, 의관인 &lt;사비 화&gt;"
    },
    "경": {
        name: "백작관",
        color: "#B0C4DE",
        description: "<h1>백작관</h1>상징 동물: 하얀 까치<br>상징 오행: 금속<br>상징 색: 백색<br>기숙사 상징 : 비상<br>기숙사 이념: 이상(의義)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 백제 마장술 전승자 &lt;김선화&gt;"
    },
    "신": {
        name: "백작관",
        color: "#B0C4DE",
        description: "<h1>백작관</h1>상징 동물: 하얀 까치<br>상징 오행: 금속<br>상징 색: 백색<br>기숙사 상징 : 비상<br>기숙사 이념: 이상(의義)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 백제 마장술 전승자 &lt;김선화&gt;"
    },
    "임": {
        name: "흑상관",
        color: "#000080",
        description: "<h1>흑상관</h1><br>상징 동물: 검은 상괭이<br>상징 오행: 물<br>상징 색: 흑색<br>기숙사 상징: 소통<br>기숙사 이념: 지혜(지智)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 천문학자 겸 예언자 &lt;석 호연겸&gt;"
    },
    "계": {
        name: "흑상관",
        color: "#000080",
        description: "<h1>흑상관</h1><br>상징 동물: 검은 상괭이<br>상징 오행: 물<br>상징 색: 흑색<br>기숙사 상징: 소통<br>기숙사 이념: 지혜(지智)<br>창립 시기: 1453년 계유정난 이후<br>창립자: 세종 시기 천문학자 겸 예언자 &lt;석 호연겸&gt;"
    }
};


if (assignedDorm) {
    // dorm-display 요소에 내용 삽입
    const dormDisplay = document.getElementById("dorm-display");


} else {
    console.error("배정받은 기숙사가 없습니다.");
}


let currentStep = 1;

function startAudio() {
    const audio = document.getElementById('backgroundAudio');
    if (audio.muted) {
        audio.muted = false;
        audio.play().catch(console.error); // 재생 오류 로그 확인
    }
}


function playClickSound1() {
    const sound = document.getElementById('clickSound1');
    sound.play().catch(console.error);
}

function playClickSound2() {
    const sound = document.getElementById('clickSound2');
    sound.play().catch(console.error);
}

function goToNextStep(step) {
    const previousStep = currentStep; // 이전 스텝 기억
    document.getElementById(`step${previousStep}`).classList.remove("active");
    
    currentStep = step;
    document.getElementById(`step${currentStep}`).classList.add("active");
    
    // 이름과 기숙사 정보를 필요한 단계에서 업데이트
    if (step === 9) {
        document.getElementById('finalUserName').innerText = currentUserName;
        document.getElementById('finalAssignedDorm').innerText = assignedDormName || "기숙사가 배정되지 않았습니다.";
    }

    updateBackgroundImage(currentStep);
}

    // 전역 변수 선언
let currentUserName = "";
let assignedDormName = "";

// 사용자 입력 값 저장 후 다음 단계로 이동
function saveNameAndGoToNextStep() {
    const userNameInput = document.getElementById('name');
    const dayMasterInput = document.getElementById('dayMaster');

    if (!userNameInput || !dayMasterInput) {
        console.error("입력 필드가 존재하지 않습니다.");
        return;
    }

    const userName = userNameInput.value.trim();
    const dayMaster = dayMasterInput.value.trim();

    // 이름 기본값 처리
    currentUserName = userName || "여행자";

    const userNameDisplay = document.getElementById('userNameDisplay');
    if (userNameDisplay) {
        userNameDisplay.innerText = currentUserName;
    }

    // 기숙사 정보 가져오기
    const assignedDorm = getAssignedDorm(dayMaster);
    if (assignedDorm) {
        assignedDormName = assignedDorm.name;

        const dormDisplay = document.getElementById('assignedDorm');
        if (dormDisplay) {
            dormDisplay.innerText = assignedDormName;
            dormDisplay.style.color = assignedDorm.color; // 색상 적용
        }

        const dormDescription = document.getElementById('dormDescription');
        if (dormDescription) {
            dormDescription.innerHTML = assignedDorm.description; // HTML 적용
        }
    } else {
        alert("올바른 일간을 입력해주세요.");
        return;
    }

    goToNextStep(4); // 다음 단계로 이동
}

// 기숙사 데이터에서 해당 일간의 기숙사 정보 가져오기
function getAssignedDorm(dayMaster) {
    if (!dayMaster) {
        console.error("일간 값이 비어 있습니다.");
        return null;
    }

    const dayMasterFirstChar = dayMaster[0]; // 첫 글자 추출
    return dormData[dayMasterFirstChar] || null;
}


// 사용자 이름을 업데이트하는 함수 수정
function updateUserNameDisplay(userName) {
    const nameSpans = document.querySelectorAll('.userNameDisplay');
    nameSpans.forEach((span) => {
        span.textContent = userName;
    });
}


function updateBackgroundImage(step) {
    const backgroundImages = {
        1: "https://github.com/chips0527/yuldowon/raw/main/map.png",
        2: "https://github.com/chips0527/yuldowon/raw/main/map.png",
        3: "https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png",
        4: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        5: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        6: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        7: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        8: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        9: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        10: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        11: "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        12: "https://github.com/chips0527/yuldowon/raw/main/map.png",
        13: "https://github.com/chips0527/yuldowon/raw/main/map.png",
    };

    const defaultImage = "https://github.com/chips0527/yuldowon/raw/main/defaultBG.png"; // 디폴트 이미지 추가

    document.body.style.backgroundImage = `url(${backgroundImages[step] || defaultImage})`;
}

// 이미지 미리 로드
(function preloadImages() {
    const imageUrls = [
        "https://github.com/chips0527/yuldowon/raw/main/map.png",
        "https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png",
        "https://github.com/chips0527/yuldowon/raw/main/sunset.png",
        "https://github.com/chips0527/yuldowon/raw/main/defaultBG.png"
    ];
    imageUrls.forEach(url => {
        const img = new Image();
        img.src = url;
    });
})();


window.onload = function() {
    updateBackgroundImage(1);  
};
       // 기숙사 배정 초기화 함수
function restart() {
    location.reload();
}

// 페이지 종료 함수
function closePage() {
    window.close();
}
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 1) 계산용: JDN -> 일간(간지) -> 한글 간(갑,을...)
  const stemHangul = ['갑','을','병','정','무','기','경','신','임','계'];

  function jdnFromGregorian(y, m, d) {
    const a = Math.floor((14 - m) / 12);
    const y2 = y + 4800 - a;
    const m2 = m + 12 * a - 3;
    return d + Math.floor((153 * m2 + 2) / 5) + 365 * y2 + Math.floor(y2 / 4) - Math.floor(y2 / 100) + Math.floor(y2 / 400) - 32045;
  }
  function getDayStemHangul(y,m,d){
    const jdn = jdnFromGregorian(y,m,d);
    const idx0 = ((jdn - 11) % 60 + 60) % 60; // 0 -> 甲子
    const stemIdx = idx0 % 10;
    return stemHangul[stemIdx];
  }

  // 2) Step3의 입력 밑에 '일간 자동추출' 버튼 추가 (있으면 생성하지 않음)
  const step3 = document.getElementById('step3');
  if (step3) {
    // 위치: dayMaster 입력 바로 아래에 버튼 넣기
    const dayMasterInput = document.getElementById('dayMaster');
    if (dayMasterInput && !document.getElementById('autoAssignBtn')) {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.id = 'autoAssignBtn';
      btn.className = 'button';
      btn.style.marginLeft = '8px';
      btn.textContent = '일간 자동추출';
      // insert after dayMaster input
      dayMasterInput.parentNode.insertBefore(btn, dayMasterInput.nextSibling);

      btn.addEventListener('click', () => {
        const dateVal = document.getElementById('birthdate').value;
        if (!dateVal) {
          alert('생년월일(양력)을 입력해 주세요.');
          return;
        }
        const [yy, mm, dd] = dateVal.split('-').map(v => parseInt(v,10));
        const stem = getDayStemHangul(yy, mm, dd); // '갑' 등
        // 3) 자동으로 dayMaster를 채우고 기존 저장/다음 단계 함수 호출
        const dayMasterField = document.getElementById('dayMaster');
        if (dayMasterField) {
          dayMasterField.value = stem; // 기존 코드에서는 첫 글자만 사용하므로 '갑'이면 충분
        }
        // (선택) 자동으로 이름이 비어있으면 '여행자'로 채움 — 기존 saveNameAndGoToNextStep() 내부 로직과 호환
        const nameField = document.getElementById('name');
        if (nameField && nameField.value.trim() === '') {
          nameField.value = '여행자';
        }
        // 4) 기존 함수로 처리: 기숙사 배정 및 다음 단계로 이동
        // saveNameAndGoToNextStep() 는 이미 페이지에 정의되어 있으므로 호출하면 됨
        try {
          saveNameAndGoToNextStep();
        } catch (e) {
          // 안전장치: 함수가 없으면 대신 getAssignedDorm으로 결과만 보여줌
          console.error('saveNameAndGoToNextStep 호출 실패:', e);
          // 간단히 기숙사 미리보기 표시
          const assigned = getAssignedDorm(stem);
          if (assigned) {
            alert(`일간: ${stem}\n예상 배정 기숙사: ${assigned.name}`);
          } else {
            alert(`일간: ${stem}\n기숙사 매핑이 없습니다.`);
          }
        }
      });
    }
  }
});
</script>

</body>
</html> 